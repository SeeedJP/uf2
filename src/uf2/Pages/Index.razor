@page "/"

<FileSelect @ref="BinFileSelect" FilesSelected="LoadBinFile" />

<div class="container">
    <section class="m-2 p-2 bg-light">
        <div class="form-group row">
            <label class="col-sm-2">
                Address
            </label>
            <div class="col-sm-4">
                <input class="form-control" @bind="Address" />
            </div>
        </div>
        <div class="form-group row">
            <div class="col">
                <button class="btn btn-primary" @onclick="@(()=>BinFileSelect.SelectFiles())">Load .bin</button>
            </div>
        </div>
    </section>

    <section class="m-2 p-2 bg-light">
        <div class="form-group row">
            <label class="col-sm-2">
                File name
            </label>
            <div class="col-sm-4">
                <input class="form-control" @bind="Uf2FileName" />
            </div>
        </div>
        <div class="form-group row">
            <div class="col">
                <button class="btn btn-primary" @onclick="SaveUf2File" disabled="@(Blocks == null)">Save .uf2</button>
            </div>
        </div>
    </section>

    <section class="m-2 p-2 bg-light">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Address</th>
                    <th scope="col">Size</th>
                </tr>
            </thead>
            <tbody>
                @if (Blocks != null)
                {
                    foreach (var block in Blocks)
                    {
                        <tr>
                            <td>@($"0x{block.Address:x08}")</td>
                            <td>@block.Data.Length</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </section>

</div>
